import java.nio.file.Paths
import java.nio.file.Files
import ch.so.agi.gretl.tasks.*
import ch.so.agi.gretl.api.*

apply plugin: 'ch.so.agi.gretl'

defaultTasks 'transferData'

// ACHTUNG: Nicht transaktionssicher!
tasks.register('deleteData', SqlExecutor) {
    database = [dbUriEdit, dbUserEdit, dbPwdEdit]
    sqlFiles = ['delete_data.sql']
}

tasks.register('transferData', Db2Db) {
    dependsOn 'deleteData'    
    sourceDb = [dbUriSimi, dbUserSimi, dbPwdSimi]
    targetDb = [dbUriEdit, dbUserEdit, dbPwdEdit]
    transferSets = [
            new TransferSet('transfer_data_ebene.sql','agi_kartenkatalog_v2.kartenkatalog_ebene', false),
            new TransferSet('transfer_data_thema.sql','agi_kartenkatalog_v2.kartenkatalog_thema', false)
                ]
}
