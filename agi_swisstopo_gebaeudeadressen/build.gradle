 
import ch.so.agi.gretl.api.TransferSet
import ch.so.agi.gretl.tasks.*
import java.nio.file.Paths
import de.undercouch.gradle.tasks.download.Download

apply plugin: "de.undercouch.download"
apply plugin: "ch.so.agi.gretl"

defaultTasks 'transferToPub'
//defaultTasks 'dbImport'


task transferToPub(type: Db2Db, dependsOn: 'dbImport') {
    description = "Transfer und Umbau der Daten von Edit nach Pub"
    sourceDb = [dbUriEdit, dbUserEdit, dbPwdEdit]
    targetDb = [dbUriPub, dbUserPub, dbPwdPub]
    transferSets = [
            new TransferSet("transform_swisstopo_gebaeudeadressen_pub.sql", 'agi_swisstopo_gebaeudeadressen_pub.gebaeudeadressen_adresse', true)
    ]
    fetchSize = 1000
    batchSize = 1000
}

