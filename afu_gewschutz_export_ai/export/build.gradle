import ch.so.agi.gretl.tasks.*

apply plugin: 'ch.so.agi.gretl'


def bereichDelete = 'gsbereich_delete.sql'
def bereichInsert = 'gsbereich_insert.sql'

def zoneDelete = 'gszone_delete.sql'
def zoneInsert = 'gszone_insert.sql'

def arealDelete = 'gsareal_delete.sql'
def arealInsert = 'gsareal_insert.sql'


defaultTasks 'clearStagingRows'

task stageGsBereich(type: SqlExecutor){
    database = [dbUrl, dbUser, dbPass]
    sqlFiles = [bereichDelete, bereichInsert]
}

task stageGsZone(type: SqlExecutor){
    database = [dbUrl, dbUser, dbPass]
    sqlFiles = [zoneDelete, zoneInsert]
}

task stageGsAreal(type: SqlExecutor){
    database = [dbUrl, dbUser, dbPass]
    sqlFiles = [arealDelete, arealInsert]
}

task stageAll(dependsOn: [stageGsBereich, stageGsAreal, stageGsZone]){
}

task clearStagingRows(type: SqlExecutor, dependsOn: [stageGsBereich, stageGsAreal, stageGsZone]){
    database = [dbUrl, dbUser, dbPass]
    sqlFiles = [arealDelete, bereichDelete, zoneDelete]
}
