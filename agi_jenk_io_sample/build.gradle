import ch.so.agi.gretl.tasks.*
import ch.so.agi.gretl.api.TransferSet

apply plugin: 'ch.so.agi.gretl'

defaultTasks 'writeFile'

tasks.register("writeFile", Exec) {
    // Ensure the build directory exists
    doFirst {
        mkdir("$buildDir")
    }

    commandLine "bash", "-c", "ls $projectDir > $buildDir/test.txt"
}

tasks.register('dumpProps'){
    doLast {
        println "Project properties:"
        project.properties.sort().each { k, v ->
            println "$k"
        }
    }
}

/*
GRETL_IMAGE_TAG=3.1 docker compose run --rm -u $UID gretl --project-dir=agi_jenk_io_sample
*/